<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CSS | NMSN</title>
    <meta name="description" content="Somebody has to win, so why not be me?">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/favicon.ico">
  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?6594ba1364804631f0a8fd4452766fed";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
  <script aysnc="true" src="https://www.googletagmanager.com/gtag/js?id=UA-127895888-1"></script>
  <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-127895888-1');
  </script>
    
    <link rel="preload" href="/assets/css/0.styles.ec7a9dc7.css" as="style"><link rel="preload" href="/assets/js/app.a3917c08.js" as="script"><link rel="preload" href="/assets/js/2.143bf0e2.js" as="script"><link rel="preload" href="/assets/js/13.ed7b9bad.js" as="script"><link rel="prefetch" href="/assets/js/10.bfb12f17.js"><link rel="prefetch" href="/assets/js/11.95c30092.js"><link rel="prefetch" href="/assets/js/12.02d03ade.js"><link rel="prefetch" href="/assets/js/14.8b04c144.js"><link rel="prefetch" href="/assets/js/15.62e6c8b5.js"><link rel="prefetch" href="/assets/js/16.58442e8f.js"><link rel="prefetch" href="/assets/js/17.e5bd374d.js"><link rel="prefetch" href="/assets/js/18.aadb3349.js"><link rel="prefetch" href="/assets/js/19.8cb53d4b.js"><link rel="prefetch" href="/assets/js/20.24639fc6.js"><link rel="prefetch" href="/assets/js/21.f95ffdf3.js"><link rel="prefetch" href="/assets/js/22.2482e250.js"><link rel="prefetch" href="/assets/js/23.2e87cad5.js"><link rel="prefetch" href="/assets/js/24.ac878c31.js"><link rel="prefetch" href="/assets/js/25.5be9f82b.js"><link rel="prefetch" href="/assets/js/26.2a5b4ac3.js"><link rel="prefetch" href="/assets/js/27.935732a6.js"><link rel="prefetch" href="/assets/js/28.c12cbcea.js"><link rel="prefetch" href="/assets/js/29.5b94311f.js"><link rel="prefetch" href="/assets/js/3.13e2822a.js"><link rel="prefetch" href="/assets/js/30.f4d6df45.js"><link rel="prefetch" href="/assets/js/31.bf46b8c3.js"><link rel="prefetch" href="/assets/js/32.633ca84c.js"><link rel="prefetch" href="/assets/js/33.e267b1b5.js"><link rel="prefetch" href="/assets/js/34.83fdc5e8.js"><link rel="prefetch" href="/assets/js/35.2078f29f.js"><link rel="prefetch" href="/assets/js/36.cfbb8f18.js"><link rel="prefetch" href="/assets/js/37.c832ebab.js"><link rel="prefetch" href="/assets/js/38.665cfa69.js"><link rel="prefetch" href="/assets/js/39.e5a858e9.js"><link rel="prefetch" href="/assets/js/4.5a3029b5.js"><link rel="prefetch" href="/assets/js/40.e32b8d9a.js"><link rel="prefetch" href="/assets/js/41.b05a12ad.js"><link rel="prefetch" href="/assets/js/42.b88c39a2.js"><link rel="prefetch" href="/assets/js/43.7b60d519.js"><link rel="prefetch" href="/assets/js/44.2f2414b2.js"><link rel="prefetch" href="/assets/js/45.85718f44.js"><link rel="prefetch" href="/assets/js/46.2bc30dd4.js"><link rel="prefetch" href="/assets/js/47.d15abaed.js"><link rel="prefetch" href="/assets/js/48.1e4e667c.js"><link rel="prefetch" href="/assets/js/49.6b1a9b49.js"><link rel="prefetch" href="/assets/js/5.ed6093fe.js"><link rel="prefetch" href="/assets/js/50.d3cc69ed.js"><link rel="prefetch" href="/assets/js/51.5c6a9aaf.js"><link rel="prefetch" href="/assets/js/52.fac8e285.js"><link rel="prefetch" href="/assets/js/53.e52aa3fd.js"><link rel="prefetch" href="/assets/js/54.18b8b153.js"><link rel="prefetch" href="/assets/js/55.67f9bbbf.js"><link rel="prefetch" href="/assets/js/56.1a846f2d.js"><link rel="prefetch" href="/assets/js/57.6a72fd81.js"><link rel="prefetch" href="/assets/js/58.85b90b3e.js"><link rel="prefetch" href="/assets/js/59.f66f3400.js"><link rel="prefetch" href="/assets/js/6.6b149b80.js"><link rel="prefetch" href="/assets/js/60.7f20d436.js"><link rel="prefetch" href="/assets/js/61.2070b510.js"><link rel="prefetch" href="/assets/js/62.dbcc46f4.js"><link rel="prefetch" href="/assets/js/7.473a6114.js"><link rel="prefetch" href="/assets/js/8.0cbdd451.js"><link rel="prefetch" href="/assets/js/9.8148293e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ec7a9dc7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">NMSN</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/tech/" class="nav-link">
  快查总结
</a></div><div class="nav-item"><a href="/excerpt/" class="nav-link">
  摘录
</a></div><div class="nav-item"><a href="/interviewQuestions/" class="nav-link router-link-active">
  面试题
</a></div><div class="nav-item"><a href="/readingNotes/" class="nav-link">
  读书笔记
</a></div><div class="nav-item"><a href="/work/" class="nav-link">
  工作总结
</a></div> <a href="https://github.com/nmsn" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/tech/" class="nav-link">
  快查总结
</a></div><div class="nav-item"><a href="/excerpt/" class="nav-link">
  摘录
</a></div><div class="nav-item"><a href="/interviewQuestions/" class="nav-link router-link-active">
  面试题
</a></div><div class="nav-item"><a href="/readingNotes/" class="nav-link">
  读书笔记
</a></div><div class="nav-item"><a href="/work/" class="nav-link">
  工作总结
</a></div> <a href="https://github.com/nmsn" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>面试题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interviewQuestions/HTML.html" class="sidebar-link">HTML</a></li><li><a href="/interviewQuestions/CSS.html" class="active sidebar-link">CSS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#bfc" class="sidebar-link">BFC</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#margin-重叠问题" class="sidebar-link">margin 重叠问题</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#css-性能优化" class="sidebar-link">css 性能优化</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#link-和-import-的区别" class="sidebar-link">link 和@import 的区别</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#居中布局" class="sidebar-link">居中布局</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#选择器优先级" class="sidebar-link">选择器优先级</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#伪元素和伪类的区别和作用" class="sidebar-link">伪元素和伪类的区别和作用</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#display-的属性及其作用" class="sidebar-link">display 的属性及其作用</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#display-block-inline-inline-block-区别" class="sidebar-link">display block inline inline-block 区别</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#行内元素和块级元素" class="sidebar-link">行内元素和块级元素</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#隐藏元素方法" class="sidebar-link">隐藏元素方法</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#display-none-visibility-hidden-opacity-0-三者区别" class="sidebar-link">display:none,visibility:hidden,opacity:0 三者区别</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#requestanimationframe" class="sidebar-link">requestAnimationFrame</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#_1px-解决方案" class="sidebar-link">1px 解决方案</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#css-定位方式" class="sidebar-link">CSS 定位方式</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#层叠山下文与层叠顺序" class="sidebar-link">层叠山下文与层叠顺序</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#盒模型" class="sidebar-link">盒模型</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#去除-inline-block-元素间间距的-n-种方法" class="sidebar-link">去除 inline-block 元素间间距的 N 种方法</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#元素底部为何有空白" class="sidebar-link">元素底部为何有空白</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#可替换元素" class="sidebar-link">可替换元素</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#画-0-5px-的线" class="sidebar-link">画 0.5px 的线</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#设置小雨-12px-的字体" class="sidebar-link">设置小雨 12px 的字体</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/CSS.html#如何重置元素的属性值到初始值" class="sidebar-link">如何重置元素的属性值到初始值</a></li></ul></li><li><a href="/interviewQuestions/JS.html" class="sidebar-link">JS</a></li><li><a href="/interviewQuestions/Network.html" class="sidebar-link">网络</a></li><li><a href="/interviewQuestions/浏览器.html" class="sidebar-link">浏览器</a></li><li><a href="/interviewQuestions/React.html" class="sidebar-link">React</a></li><li><a href="/interviewQuestions/Vue.html" class="sidebar-link">Vue</a></li><li><a href="/interviewQuestions/TypeScript.html" class="sidebar-link">TypeScript</a></li><li><a href="/interviewQuestions/Webpack.html" class="sidebar-link">Webpack</a></li><li><a href="/interviewQuestions/设计模式.html" class="sidebar-link">设计模式</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="css"><a href="#css" aria-hidden="true" class="header-anchor">#</a> CSS</h1> <h2 id="bfc"><a href="#bfc" aria-hidden="true" class="header-anchor">#</a> BFC</h2> <blockquote><p>块格式化上下文（Block Formatting Context，BFC） 是 Web 页面的可视化 CSS 渲染的一部分，是块盒子的布局过程发生的区域，也是浮动元素与其他元素交互的区域。</p></blockquote> <p>具有 BFC 特性的元素可以看作是隔离了的独立容器，容器里面的元素不会在布局上影响到外面的元素，并且 BFC 具有普通容器所没有的一些特性。</p> <h3 id="_1-如何形成-bfc"><a href="#_1-如何形成-bfc" aria-hidden="true" class="header-anchor">#</a> 1. 如何形成 BFC</h3> <p>只要元素满足下面任一条件即可触发 BFC 特性:</p> <ul><li><strong>根元素(<code>&lt;html&gt;</code>)</strong></li> <li><strong>浮动元素（元素的 float 不是 none）</strong></li> <li><strong>绝对定位元素（元素的 position 为 absolute 或 fixed）</strong></li> <li><strong>overflow 值不为 visible 的块元素(hidden、auto、scroll)</strong></li> <li>contain 值为 layout、content 或 paint 的元素</li> <li>弹性元素（display 为 flex 或 inline-flex 元素的直接子元素）</li> <li>网格元素（display 为 grid 或 inline-grid 元素的直接子元素）</li> <li>多列容器（元素的 column-count 或 column-width 不为 auto，包括 column-count 为 1）</li> <li>column-span 为 all 的元素始终会创建一个新的 BFC，即使该元素没有包裹在一个多列容器中（标准变更，Chrome bug）</li> <li>display
<ul><li>行内块元素（元素的 display 为 inline-block）</li> <li>表格单元格（元素的 display 为 table-cell，HTML 表格单元格默认为该值）</li> <li>表格标题（元素的 display 为 table-caption，HTML 表格标题默认为该值）</li> <li>匿名表格单元格元素（元素的 display 为 table、table-row、 table-row-group、table-header-group、
table-footer-group（分别是 HTML table、row、tbody、thead、tfoot 的默认属性）或 inline-table）</li> <li>display 值为 flow-root 的元素</li></ul></li></ul> <h3 id="_2-bfc-的原理-bfc-的布局规则"><a href="#_2-bfc-的原理-bfc-的布局规则" aria-hidden="true" class="header-anchor">#</a> 2. BFC 的原理/BFC 的布局规则</h3> <ul><li>BFC 内部的子元素，在垂直方向，边距会发生重叠</li> <li>BFC 在页面中是独立的容器，外面的元素不会影响里面的元素，反之亦然</li> <li>BFC 区域不与旁边的 float box 区域重叠</li> <li>计算 BFC 的高度时，浮动的子元素也参与计算</li> <li>文字层不会被浮动层覆盖，环绕于周围</li></ul> <h3 id="_3-bfc-的原理应用"><a href="#_3-bfc-的原理应用" aria-hidden="true" class="header-anchor">#</a> 3. BFC 的原理应用</h3> <ul><li><p>阻止 margin 重叠：由于 BFC 是一个独立的区域，内部的元素和外部的元素互不影响，将两个元素变为两个 BFC，就解决了 margin 重叠的问题</p></li> <li><p>可以包含浮动元素——清除内部浮动（清除浮动的原理时两个 div 都位于同一个 BFC 区域之中）</p></li> <li><p>可以阻止元素被浮动元素覆盖/解决高度塌陷：在对子元素设置浮动后，父元素会发生高度塌陷，也就是父元素的高度变为 0。解决这个问题，只需要把父元素变成一个 BFC。常用的办法是给父元素设置overflow:hidden</p></li> <li><p>自适应两栏布局</p> <div class="language- extra-class"><pre class="language-text"><code>  .left{
    width: 100px;
    height: 200px;
    background: red;
    float: left;
}

.right{
    height: 300px;
    background: blue;
    overflow: hidden;
}

  &lt;div class=&quot;left&quot;&gt;&lt;/div&gt;
  &lt;div class=&quot;right&quot;&gt;&lt;/div&gt;
</code></pre></div><p>左侧设置float:left，右侧设置overflow: hidden。这样右边就触发了 BFC，BFC 的区域不会与浮动元素发生重叠，所以两侧就不会发生重叠，实现了自适应两栏布局。</p></li></ul> <h2 id="margin-重叠问题"><a href="#margin-重叠问题" aria-hidden="true" class="header-anchor">#</a> margin 重叠问题</h2> <h3 id="问题"><a href="#问题" aria-hidden="true" class="header-anchor">#</a> 问题</h3> <p>两个块级元素的上外边距和下外边距可能会合并（折叠）为一个外边距，其大小会取其中外边距值大的那个，这种行为就是外边距折叠。需要注意的是，浮动的元素和绝对定位这种脱离文档流的元素的外边距不会折叠。重叠只会出现在垂直方向。</p> <h3 id="计算原则"><a href="#计算原则" aria-hidden="true" class="header-anchor">#</a> 计算原则</h3> <p>折叠合并后外边距的计算原则如下：</p> <ul><li>如果两者都是正数，那么就去最大者</li> <li>如果是一正一负，就会正值减去负值的绝对值</li> <li>两个都是负值时，用 0 减去两个中绝对值大的那个</li></ul> <h3 id="解决"><a href="#解决" aria-hidden="true" class="header-anchor">#</a> 解决</h3> <ol><li>兄弟之间重叠
<ol><li>底部元素变为行内盒子 display: inline-block</li> <li>底部元素设置浮动 float</li> <li>底部元素的 position 的值为 absolute/fixed</li></ol></li> <li>父子之间重叠
<ol><li>父元素加入 overflow:hidden</li> <li>父元素添加透明边框 border:1px solid transparent</li> <li>子元素变为行内盒子 display: inline-block</li> <li>子元素加入浮动属性或定位</li></ol></li></ol> <h2 id="css-性能优化"><a href="#css-性能优化" aria-hidden="true" class="header-anchor">#</a> css 性能优化</h2> <p>原文：<a href="https://juejin.im/post/5b6133a351882519d346853f?utm_source=gold_browser_extension" target="_blank" rel="noopener noreferrer">CSS 性能优化的 8 个技巧<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_1-内联首屏关键-css-critical-css"><a href="#_1-内联首屏关键-css-critical-css" aria-hidden="true" class="header-anchor">#</a> 1. 内联首屏关键 css(critical css)</h3> <h3 id="_2-异步加载-css"><a href="#_2-异步加载-css" aria-hidden="true" class="header-anchor">#</a> 2. 异步加载 css</h3> <ol><li><p>使用 JavaScript 动态创建样式表 link 元素，并插入到 DOM 中</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建link标签</span>
<span class="token keyword">const</span> myCSS <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;link&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCSS<span class="token punctuation">.</span>rel <span class="token operator">=</span> <span class="token string">&quot;stylesheet&quot;</span><span class="token punctuation">;</span>
myCSS<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;mystyles.css&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 插入到header的最后位置</span>
document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>
  myCSS<span class="token punctuation">,</span>
  document<span class="token punctuation">.</span>head<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>document<span class="token punctuation">.</span>head<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nextSibling<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>将 link 元素的 media 属性设置为用户浏览器不匹配的媒体类型（或媒体查询），如 media=&quot;print&quot;，甚至可以是完全不存在的类型 media=&quot;noexist&quot;。对浏览器来说，如果样式表不适用于当前媒体类型，其优先级会被放低，会在不阻塞页面渲染的情况下再进行下载</p> <p>在 css 文件中使用<code>@media</code>也可以达到异步加载的效果，例如<code>background-image</code>根据媒体查询加载不同的图片</p></li> <li><p><code>rel=&quot;preload&quot;</code>这一 Web 标准指出了如何异步加载资源，包括 CSS 类资源</p> <p><code>&lt;link&gt;</code> 元素的 rel 属性的属性值 preload 能够让你在你的 HTML 页面中 <code>&lt;head&gt;</code>元素内部书写一些声明式的资源获取请求，可以指明哪些资源是在页面加载完成后即刻需要的。对于这种即刻需要的资源，你可能希望在页面加载的生命周期的早期阶段就开始获取，在浏览器的主渲染机制介入前就进行预加载。这一机制使得资源可以更早的得到加载并可用，且更不易阻塞页面的初步渲染，进而提升性能</p></li></ol> <h3 id="_3-文件压缩"><a href="#_3-文件压缩" aria-hidden="true" class="header-anchor">#</a> 3. 文件压缩</h3> <p>文件的大小会直接影响浏览器的加载速度，这一点在网络较差时表现地尤为明显。相信大家都早已习惯对 CSS 进行压缩，现在的构建工具，如 webpack、gulp/grunt、rollup 等也都支持 CSS 压缩功能。压缩后的文件能够明显减小，可以大大降低了浏览器的加载时间。</p> <p>webpack 中可以使用
<code>mini-css-extract-plugin</code>插件导出 css
<code>optimize-css-assets-webpack-plugin</code>压缩代码</p> <h3 id="_4-删除无用-css"><a href="#_4-删除无用-css" aria-hidden="true" class="header-anchor">#</a> 4. 删除无用 css</h3> <p>找到并删除代码中无用的 css，可以借助<code>Uncss</code>库来实现自动删除</p> <h3 id="_5-有选择地使用选择器"><a href="#_5-有选择地使用选择器" aria-hidden="true" class="header-anchor">#</a> 5. 有选择地使用选择器</h3> <ol><li>保持简单，不要使用嵌套过多过于复杂的选择器</li> <li>通配符和属性选择器效率最低，需要匹配的元素最多，尽量避免使用</li> <li>不要使用类选择器的 ID 选择器修饰元素标签</li> <li>不要为了追求速度而放弃可读性和可维护性</li></ol> <h3 id="_6-减少使用昂贵的属性"><a href="#_6-减少使用昂贵的属性" aria-hidden="true" class="header-anchor">#</a> 6. 减少使用昂贵的属性</h3> <p>在浏览器绘制屏幕时，所有需要浏览器进行操作或计算的属性相对而言都需要花费更大的代价。当页面发生重绘时，它们会降低浏览器的渲染性能。所以在编写 CSS 时，我们应该尽量减少使用昂贵属性，如<code>box-shadow</code>/<code>border-radius</code>/<code>filter</code>/<code>透明度</code>/<code>:nth-child</code>等</p> <h3 id="_7-优化重排-回流-reflow-和重绘-repaint"><a href="#_7-优化重排-回流-reflow-和重绘-repaint" aria-hidden="true" class="header-anchor">#</a> 7. 优化重排/回流(reflow)和重绘(repaint)</h3> <h4 id="导致重排-回流的操作"><a href="#导致重排-回流的操作" aria-hidden="true" class="header-anchor">#</a> 导致重排/回流的操作</h4> <ol><li>调整窗口大小</li> <li>改变字体大小</li> <li>样式表变动</li> <li>元素内容变化，尤其是输入控件</li> <li>CSS 伪类激活</li> <li>DOM 操作</li> <li>DOM 元素的几何属性的获取， 会使浏览器将渐进回流队列 Flush，立即执行回流。</li></ol> <h4 id="一些常用且会导致回流的属性和方法"><a href="#一些常用且会导致回流的属性和方法" aria-hidden="true" class="header-anchor">#</a> 一些常用且会导致回流的属性和方法</h4> <ul><li>clientWidth、clientHeight、clientTop、clientLeft</li> <li>offsetWidth、offsetHeight、offsetTop、offsetLeft</li> <li>scrollWidth、scrollHeight、scrollTop、scrollLeft</li> <li>scrollIntoView()、scrollIntoViewIfNeeded()</li> <li>getComputedStyle()</li> <li>getBoundingClientRect()</li> <li>scrollTo()</li></ul> <h4 id="导致重绘的操作"><a href="#导致重绘的操作" aria-hidden="true" class="header-anchor">#</a> 导致重绘的操作</h4> <p>当页面中元素样式的改变并不影响它在文档流中的位置时（例如：color、background-color、visibility 等）</p> <h4 id="避免频繁触发重排-回流的方法"><a href="#避免频繁触发重排-回流的方法" aria-hidden="true" class="header-anchor">#</a> 避免频繁触发重排/回流的方法</h4> <p>CSS</p> <ul><li>避免使用 table 布局。</li> <li>尽可能在 DOM 树的最末端改变 class。</li> <li>避免设置多层内联样式。</li> <li>将动画效果应用到 position 属性为 absolute 或 fixed 的元素上。</li> <li>避免使用 CSS 表达式（例如：calc()）</li></ul> <p>JS</p> <ul><li>避免频繁操作样式，最好一次性重写 style 属性，或者将样式列表定义为 class 并一次性更改 class 属性。</li> <li>避免频繁操作 DOM，创建一个 documentFragment，在它上面应用所有 DOM 操作，最后再把它添加到文档中。</li> <li>也可以先为元素设置 display: none，操作结束后再把它显示出来。因为在 display 属性为 none 的元素上进行的 DOM 操作不会引发回流和重绘。</li> <li>避免频繁读取会引发回流/重绘的属性，如果确实需要多次使用，就用一个变量缓存起来。</li> <li>对具有复杂动画的元素使用绝对定位，使它脱离文档流，否则会引起父元素及后续元素频繁回流。</li></ul> <p>浏览器针对页面的回流与重绘，进行了自身的优化——渲染队列</p> <p>浏览器会将所有的回流、重绘的操作放在一个队列中，当队列中的操作到了一定的数量或者到了一定的时间间隔，浏览器就会对队列进行批处理。这样就会让多次的回流、重绘变成一次回流重绘</p> <p>上面，将多个读操作（或者写操作）放在一起，就会等所有的读操作进入队列之后执行，这样，原本应该是触发多次回流，变成了只触发一次回流。</p> <h4 id="优化动画"><a href="#优化动画" aria-hidden="true" class="header-anchor">#</a> 优化动画</h4> <p>对于如何优化动画，我们知道，一般情况下，动画需要频繁的操作DOM，就就会导致页面的性能问题，我们可以将动画的position属性设置为absolute或者fixed，将动画脱离文档流，这样他的回流就不会影响到页面了。</p> <h3 id="_4-不要使用-import"><a href="#_4-不要使用-import" aria-hidden="true" class="header-anchor">#</a> 4. 不要使用@import</h3> <p>原因：</p> <ol><li><p>使用@import 引入 css 会影响浏览器的并行下载。使用@import 引用的 css 闻不见只有在引用它的那个 css 文件被下载、解析之后，浏览器才会知道还有另外一个 css 需要下载，这时才去下载，然后下载后开始解析、构建 render 树等一系列操作。这就导致浏览器无法并行下载所需的样式文件</p></li> <li><p>多个@import 会导致下载顺序混乱。在 IE 中，@import 会引发资源文件的下载顺序被打乱，即排列在@import 后面的 js 文件先于@import 下载，并且打乱甚至破坏@import 自身的并行下载</p></li></ol> <h2 id="link-和-import-的区别"><a href="#link-和-import-的区别" aria-hidden="true" class="header-anchor">#</a> link 和@import 的区别</h2> <ul><li>link 属于 XHTML 标签，而@import 是 CSS 提供的。</li> <li>页面被加载时，link 会同时被加载，而@import 引用的 CSS 会等到页面被加载完再加载。</li> <li>@import 只在 IE 5 以上才能识别，而 link 是 XHTML 标签，无兼容问题。</li> <li>link 方式的样式权重高于@import 的权重。</li> <li>使用 dom 控制样式时的差别。当使用 javascript 控制 dom 去改变样式的时候，只能使用 link 标签，因为@import 不是 dom 可以控制的</li></ul> <h2 id="居中布局"><a href="#居中布局" aria-hidden="true" class="header-anchor">#</a> 居中布局</h2> <p>水平居中：</p> <ul><li>行内元素： text-align: center</li> <li>块级元素： margin: 0 auto</li> <li>absolute + transform（不需知道元素宽度）/ 负 margin（需知道元素宽度）</li> <li>flex + justify-content: center</li></ul> <p>垂直居中：</p> <ul><li>line-height: height</li> <li>absolute + transform（不需知道元素宽度）/ 负 margin（需知道元素宽度）</li> <li>flex + align-items: center</li> <li>table</li></ul> <p>水平垂直居中：</p> <ul><li>absolute + transform（不需知道元素宽度）/ 负 margin（需知道元素宽度）</li> <li>flex + justify-content + align-items</li></ul> <h2 id="选择器优先级"><a href="#选择器优先级" aria-hidden="true" class="header-anchor">#</a> 选择器优先级</h2> <table><thead><tr><th>选择器</th> <th>格式</th> <th>优先级权重</th></tr></thead> <tbody><tr><td>id 选择器</td> <td>#id</td> <td>100</td></tr> <tr><td>类选择器</td> <td>.classname</td> <td>10</td></tr> <tr><td>属性选择器</td> <td>a[ref='e']</td> <td>10</td></tr> <tr><td>伪类选择器</td> <td>li:last-child</td> <td>10</td></tr> <tr><td>标签选择器</td> <td>div</td> <td>1</td></tr> <tr><td>伪元素选择器</td> <td>li:after</td> <td>1</td></tr> <tr><td>相邻兄弟选择器</td> <td>h1+p</td> <td>0</td></tr> <tr><td>子选择器</td> <td>ul&gt;li</td> <td>0</td></tr> <tr><td>后代选择器</td> <td>li a</td> <td>0</td></tr> <tr><td>通配符选择器</td> <td>*</td> <td>0</td></tr></tbody></table> <p>对于选择器的优先级：</p> <ul><li>标签选择器、伪元素选择器：1</li> <li>类选择器、伪类选择器、属性选择器：10</li> <li>id 选择器：100</li> <li>内联样式：1000</li></ul> <p>注意事项：</p> <ul><li>!important 声明的样式的优先级最高</li> <li>如果优先级相同，则最后出现的样式生效</li> <li>继承得到的样式的优先级最低</li> <li>通用选择器（*）、子选择器（&gt;）和相邻同胞选择器（+）并不在这四个等级中，所以它们的权值都为 0 ；</li> <li>样式表的来源不同时，优先级顺序为：内联样式 &gt; 内部样式 &gt; 外部样式 &gt; 浏览器用户自定义样式 &gt; 浏览器默认样式。</li></ul> <h2 id="伪元素和伪类的区别和作用"><a href="#伪元素和伪类的区别和作用" aria-hidden="true" class="header-anchor">#</a> 伪元素和伪类的区别和作用</h2> <ul><li>伪元素： 在内容元素的前后插入额外的元素或样式，但是这些元素实际上并不在文档中生成。它们只在外部显示可见，但不会在文档的源代码中找到它们，因此，称为“伪”元素。例如：</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">p::before</span> <span class="token punctuation">{</span><span class="token property">content</span><span class="token punctuation">:</span><span class="token string">&quot;第一章：&quot;</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">p::after</span> <span class="token punctuation">{</span><span class="token property">content</span><span class="token punctuation">:</span><span class="token string">&quot;Hot!&quot;</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">p::first-line</span> <span class="token punctuation">{</span><span class="token property">background</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">p::first-letter</span> <span class="token punctuation">{</span><span class="token property">font-size</span><span class="token punctuation">:</span>30px<span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre></div><ul><li>伪类：将特殊的效果添加到特定选择器上。它是已有元素上添加类别的，不会产生新的元素。例如：</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">a:hover</span> <span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span> #FF00FF<span class="token punctuation">}</span>
<span class="token selector">p:first-child</span> <span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">}</span>
</code></pre></div><ul><li>总结：伪类是通过在元素选择器上加⼊伪类改变元素状态，⽽伪元素通过对元素的操作进⾏对元素的改变。</li></ul> <p><code>!important</code>例外规则</p> <p>当在一个样式声明中使用一个<code>!important</code>规则时，此声明将覆盖任何其他声明。虽然，从技术上讲，!important 与优先级无关，但它与最终的结果直接相关。
使用<code>!important</code>是一个坏习惯，应该尽量避免，因为这破坏了样式表中的固有的级联规则 使得调试找 bug 变得更加困难了。当两条相互冲突的带有<code>!important</code>规则的声明被应用到相同的元素上时，拥有更大优先级的声明将会被采用。</p> <h2 id="display-的属性及其作用"><a href="#display-的属性及其作用" aria-hidden="true" class="header-anchor">#</a> display 的属性及其作用</h2> <table><thead><tr><th>属性</th> <th>作用</th></tr></thead> <tbody><tr><td>none</td> <td>元素不显示，并且会从文档流中移除。｜</td></tr> <tr><td>block</td> <td>块类型。默认宽度为父元素宽度，可设置宽高，换行显示。</td></tr> <tr><td>inline</td> <td>行内严肃类型。默认宽度为内容宽度，不可设置宽高，同行显示。</td></tr> <tr><td>inline-block</td> <td>默认宽度为内容宽度，可以设置宽高，同行显示。</td></tr> <tr><td>list-item</td> <td>像块类型元素一样显示，并添加样式列表标记。</td></tr> <tr><td>table</td> <td>此元素会作为块级表格来显示。</td></tr> <tr><td>inherit</td> <td>规定应该从父元素继承 display 属性的值。</td></tr></tbody></table> <h2 id="display-block-inline-inline-block-区别"><a href="#display-block-inline-inline-block-区别" aria-hidden="true" class="header-anchor">#</a> display block inline inline-block 区别</h2> <ol><li>block 独占一行，多个元素会另起一行，可以设置 width、height、margin 和 padding</li> <li>inline 元素不会独占一行，设置 width、height 属性无效。但可以设置水平方向的 margin 和padding</li> <li>inline-block 将对象设置为 inline 对象，但对象的内容作为 block 对象呈现，之后的內联对象会被排列在同一行内</li></ol> <h2 id="行内元素和块级元素"><a href="#行内元素和块级元素" aria-hidden="true" class="header-anchor">#</a> 行内元素和块级元素</h2> <h3 id="行内元素"><a href="#行内元素" aria-hidden="true" class="header-anchor">#</a> 行内元素</h3> <ul><li>设置宽高无效</li> <li>可以设置水平方向的 margin 和 padding，不能设置垂直方向的 padding 和 margin</li> <li>不会自动换行</li></ul> <h3 id="快级元素"><a href="#快级元素" aria-hidden="true" class="header-anchor">#</a> 快级元素</h3> <ul><li>可以设置宽高</li> <li>设置 margin 和 padding 都有效</li> <li>可以自动换行</li> <li>多个块状，默认排列从上到下</li></ul> <h2 id="隐藏元素方法"><a href="#隐藏元素方法" aria-hidden="true" class="header-anchor">#</a> 隐藏元素方法</h2> <ol><li>display: none 渲染树不会渲染该渲染对象，因此该元素不会在页面中占据位置，也不会响应绑定的监听事件</li> <li>visibility: hidden 元素在页面中仍占据空间，但是不会响应绑定的监听事件</li> <li>opacity: 0 将元素的透明度设置为 0，以此来实现元素的隐藏。元素在页面中仍然占据空间，并且能够响应元素绑定的监听事件</li> <li>position: absolute 通过使用绝对定位将元素移除可视区域内，以此来实现元素的隐藏</li> <li>z-index: 来使其他元素遮盖住该元素，以此来实现隐藏</li> <li>clip/clip-path 使用元素裁剪的方法来实现元素的隐藏，这种方法下，元素仍在页面中占据位置，但是不会响应绑定的监听事件</li> <li>transform: scale(0,0) 将元素缩放为 0，来实现元素的隐藏。这种方法下，元素仍在页面中占据位置，但是不会响应绑定的监听事件</li></ol> <h2 id="display-none-visibility-hidden-opacity-0-三者区别"><a href="#display-none-visibility-hidden-opacity-0-三者区别" aria-hidden="true" class="header-anchor">#</a> display:none,visibility:hidden,opacity:0 三者区别</h2> <table><thead><tr><th></th> <th>display:none</th> <th>visibility:hidden</th> <th>opacity:0</th></tr></thead> <tbody><tr><td>是否占据页面空间</td> <td>x</td> <td>√</td> <td>√</td></tr> <tr><td>对子元素影响</td> <td>√</td> <td>x</td> <td>√</td></tr> <tr><td>自身绑定的事件能否继续触发</td> <td>x</td> <td>x</td> <td>√</td></tr> <tr><td>是否影响其他元素触发事件（例如被遮挡的元素）</td> <td>x</td> <td>x</td> <td>√</td></tr> <tr><td>是否产生回流（reflow）</td> <td>√</td> <td>x</td> <td>x</td></tr> <tr><td>是否产生重绘（repaint）</td> <td>√</td> <td>√</td> <td>不一定</td></tr></tbody></table> <p>元素提升为合成层后，transform 和 opacity 不会触发 repaint，如果不是合成层，则其依然会触发 repaint。在 Blink 和 WebKit 内核的浏览器中，对于应用了 transition 或者 animation 的 opacity 元素，浏览器会将渲染层提升为合成层。也可以使用 translateZ(0) 或者 translate3d(0,0,0) 来人为地强制性地创建一个合成层。</p> <p>display:none 是非继承属性，子孙元素会随着父节点从渲染树消失，通过修改子孙节点的属性也无法显示
visibility:hidden 是继承属性，子孙节点消失是由于继承了 hidden，通过设置 visibility:visible 可以让子孙节点显示</p> <p>如果使用读屏器，设置为 display:none 的内容不会被读取，设置为 visibility:hidden 的内容会被读取</p> <h2 id="requestanimationframe"><a href="#requestanimationframe" aria-hidden="true" class="header-anchor">#</a> requestAnimationFrame</h2> <p>实现动画效果的方法比较多，Javascript 中可以通过定时器 setTimeout 来实现，CSS3 中可以使用 transition 和 animation 来实现，HTML5 中的 canvas 也可以实现。除此之外，HTML5 提供一个专门用于请求动画的 API，那就是 requestAnimationFrame，顾名思义就是请求动画帧。</p> <h3 id="语法"><a href="#语法" aria-hidden="true" class="header-anchor">#</a> 语法</h3> <p>window.requestAnimationFrame(callback); 其中，callback 是下一次重绘之前更新动画帧所调用的函数(即上面所说的回调函数)。该回调函数会被传入 DOMHighResTimeStamp 参数，它表示 requestAnimationFrame() 开始去执行回调函数的时刻。该方法属于宏任务，所以会在执行完微任务之后再去执行。</p> <p>使用 cancelAnimationFrame()来取消执行动画，该方法接收一个参数——requestAnimationFrame 默认返回的 id，只需要传入这个 id 就可以取消动画了。</p> <h3 id="优势"><a href="#优势" aria-hidden="true" class="header-anchor">#</a> 优势</h3> <ul><li>CPU节能：使用 SetInterval 实现的动画，当页面被隐藏或最小化时，SetInterval 仍然在后台执行动画任务，由于此时页面处于不可见或不可用状态，刷新动画是没有意义的，完全是浪费 CPU 资源。而 RequestAnimationFrame 则完全不同，当页面处理未激活的状态下，该页面的屏幕刷新任务也会被系统暂停，因此跟着系统走的 RequestAnimationFrame 也会停止渲染，当页面被激活时，动画就从上次停留的地方继续执行，有效节省了 CPU 开销。</li> <li>函数节流：在高频率事件( resize, scroll 等)中，为了防止在一个刷新间隔内发生多次函数执行，RequestAnimationFrame 可保证每个刷新间隔内，函数只被执行一次，这样既能保证流畅性，也能更好的节省函数执行的开销，一个刷新间隔内函数执行多次时没有意义的，因为多数显示器每 16.7ms 刷新一次，多次绘制并不会在屏幕上体现出来。</li> <li>减少 DOM 操作：requestAnimationFrame 会把每一帧中的所有 DOM 操作集中起来，在一次重绘或回流中就完成，并且重绘或回流的时间间隔紧紧跟随浏览器的刷新频率，一般来说，这个频率为每秒 60 帧。</li></ul> <h2 id="_1px-解决方案"><a href="#_1px-解决方案" aria-hidden="true" class="header-anchor">#</a> 1px 解决方案</h2> <h3 id="形成原因"><a href="#形成原因" aria-hidden="true" class="header-anchor">#</a> 形成原因</h3> <p>我们知道，像素可以分为物理像素（CSS 像素）和设备像素。由于现在手机大部分是 Retina 高清屏幕，所以在 PC 端和移动端存在设备像素比的概念。简单说就是你在 pc 端看到的 1px 和在移动端看到的 1px 是不一样的。</p> <p>在 PC 端上，像素可以称为 CSS 像素，PC 端上 dpr 为 1。也就说你书写 css 样式是是多少在 pc 上就显示多少。而在移动端上，像素通常使用设备像素。往往 PC 端和移动端上在不做处理的情况下 1px 显示是不同的。</p> <p>一个物理像素等于多少个设备像素取决于移动设备的屏幕特性(是否是 Retina)和用户缩放比例。</p> <p>如果是 Retina 高清屏幕，那么 dpr 的值可能为 2 或者 3，那么当你在 pc 端上看到的 1px 时，在移动端上看到的就会是 2px 或者 3px。</p> <p>由于业务需求，我们需要一些方法来实现移动端上的 1px。</p> <h3 id="border-image（不推荐）"><a href="#border-image（不推荐）" aria-hidden="true" class="header-anchor">#</a> border-image（不推荐）</h3> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.border-image-1px</span> <span class="token punctuation">{</span>
  <span class="token property">border-width</span><span class="token punctuation">:</span> 1px 0<span class="token punctuation">;</span>
  <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url">url(linenew.png)</span> 2 0 stretch<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>缺点是修改起来很麻烦，需要替换图片</p> <h3 id="transform-伪类（推荐）"><a href="#transform-伪类（推荐）" aria-hidden="true" class="header-anchor">#</a> transform 伪类（推荐）</h3> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.setOnePx</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token selector">;
  &amp;::after</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #e5e5e5<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="box-shadow（不推荐）"><a href="#box-shadow（不推荐）" aria-hidden="true" class="header-anchor">#</a> box-shadow（不推荐）</h3> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.box-shadow-1px</span> <span class="token punctuation">{</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> inset 0px -1px 1px -1px #c8c7cc<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>缺点是实现效果和边框还是有细微差异</p> <h3 id="viewport-设置-scale"><a href="#viewport-设置-scale" aria-hidden="true" class="header-anchor">#</a> viewport 设置 scale</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">var</span> viewport <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;meta[name=viewport]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//下面是根据设备像素设置viewport</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    viewport<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>
      <span class="token string">'content'</span><span class="token punctuation">,</span>
      <span class="token string">'width=device-width,initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no'</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    viewport<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>
      <span class="token string">'content'</span><span class="token punctuation">,</span>
      <span class="token string">'width=device-width,initial-scale=0.5,maximum-scale=0.5,minimum-scale=0.5,user-scalable=no'</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    viewport<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>
      <span class="token string">'content'</span><span class="token punctuation">,</span>
      <span class="token string">'width=device-width,initial-scale=0.333,maximum-scale=0.333,minimum-scale=0.333,user-scalable=no'</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>这样解决了，但这样做的副作用也很大，整个页面被缩放了。这时 1px 已经被处理成物理像素大小，这样的大小在手机上显示边框很合适。但是，一些原本不需要被缩小的内容，比如文字、图片等，也被无差别缩小掉了。</p> <h3 id="直接写-0-5px（兼容性不好）"><a href="#直接写-0-5px（兼容性不好）" aria-hidden="true" class="header-anchor">#</a> 直接写 0.5px（兼容性不好）</h3> <div class="language- extra-class"><pre class="language-text"><code>&lt;div id=&quot;container&quot; data-device={{window.devicePixelRatio}}&gt;&lt;/div&gt;

#container[data-device=&quot;2&quot;] {
  border:0.5px solid #333
}
</code></pre></div><p>直接把 1px 改成 1/devicePixelRatio 后的值，这是目前为止最简单的一种方法。这种方法的缺陷在于兼容性不行，IOS 系统需要 8 及以上的版本，安卓系统则直接不兼容。</p> <h2 id="css-定位方式"><a href="#css-定位方式" aria-hidden="true" class="header-anchor">#</a> CSS 定位方式</h2> <ul><li>static: 正常文档流定位，此时 top, right, bottom, left 和 z-index 属性无效，块级元素从上往下纵向排布，行级元素从左向右排列。</li> <li>relative：相对定位，此时的『相对』是相对于正常文档流的位置。</li> <li>absolute：相对于最近的非 static 定位祖先元素的偏移，来确定元素位置，比如一个绝对定位元素它的父级、和祖父级元素都为 relative，它会相对他的父级而产生偏移。</li> <li>fixed：指定元素相对于屏幕视口（viewport）的位置来指定元素位置。元素的位置在屏幕滚动时不会改变，比如那种回到顶部的按钮一般都是用此定位方式。</li> <li>sticky：粘性定位，特性近似于 relative 和 fixed 的合体，其在实际应用中的近似效果就是 IOS 通讯录滚动的时候的『顶屁股』。</li></ul> <h2 id="层叠山下文与层叠顺序"><a href="#层叠山下文与层叠顺序" aria-hidden="true" class="header-anchor">#</a> 层叠山下文与层叠顺序</h2> <h3 id="层叠上下文"><a href="#层叠上下文" aria-hidden="true" class="header-anchor">#</a> 层叠上下文</h3> <p>层叠上下文是 HTML 元素的三维概念，这些 HTML 元素在一条假想的相对于面向（电脑屏幕的）视窗或者网页的用户的 z 轴上延伸，HTML 元素依据其自身属性按照优先级顺序占用层叠上下文的空间。</p> <h4 id="产生条件"><a href="#产生条件" aria-hidden="true" class="header-anchor">#</a> 产生条件</h4> <ul><li>根元素 (HTML),</li> <li>z-index 值不为 &quot;auto&quot;的 绝对/相对定位，</li> <li>一个 z-index 值不为 &quot;auto&quot;的 flex 项目 (flex item)，即：父- 元素 display: flex|inline-flex，</li> <li>opacity 属性值小于 1 的元素（参考 the specification for - opacity），</li> <li>transform 属性值不为 &quot;none&quot;的元素，</li> <li>mix-blend-mode 属性值不为 &quot;normal&quot;的元素，</li> <li>filter 值不为“none”的元素，</li> <li>perspective 值不为“none”的元素，</li> <li>isolation 属性被设置为 &quot;isolate&quot;的元素，</li> <li>position: fixed</li> <li>在 will-change 中指定了任意 CSS 属性，即便你没有直接指定这些属性的值（参考 这篇文章）</li> <li>-webkit-overflow-scrolling 属性被设置 &quot;touch&quot;的元素</li></ul> <h3 id="层叠顺序"><a href="#层叠顺序" aria-hidden="true" class="header-anchor">#</a> 层叠顺序</h3> <p><img src="/assets/img/css_z-index.bf758b5e.png" alt="层叠顺序"></p> <ul><li>诸如 border/background 一般为装饰属性</li> <li>浮动和块状元素一般用作布局，</li> <li>内联元素是内容</li></ul> <h4 id="层叠顺序准则"><a href="#层叠顺序准则" aria-hidden="true" class="header-anchor">#</a> 层叠顺序准则</h4> <ol><li>谁大谁上：当具有明显的层叠水平标示的时候，如识别的 z-indx 值，在同一个层叠上下文领域，层叠水平值大的那一个覆盖小的那一个。通俗讲就是官大的压死官小的。</li> <li>后来居上：当元素的层叠水平一致、层叠顺序相同的时候，在 DOM 流中处于后面的元素会覆盖前面的元素。</li></ol> <h3 id="参考文献"><a href="#参考文献" aria-hidden="true" class="header-anchor">#</a> 参考文献</h3> <ul><li>深入理解 CSS 中的层叠上下文和层叠顺序：<a href="https://www.zhangxinxu.com/wordpress/2016/01/understand-css-stacking-context-order-z-index/" target="_blank" rel="noopener noreferrer">https://www.zhangxinxu.com/wordpress/2016/01/understand-css-stacking-context-order-z-index/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="盒模型"><a href="#盒模型" aria-hidden="true" class="header-anchor">#</a> 盒模型</h2> <p>当对一个文档进行布局（lay out）的时候，浏览器的渲染引擎会根据标准之一的 CSS 基础框盒模型（CSS basic box model），将所有元素表示为一个个矩形的盒子（box）。CSS 决定这些盒子的大小、位置以及属性（例如颜色、背景、边框尺寸…）。</p> <p>盒模型由 content（内容）、padding（内边距）、border（边框）、margin（外边距）组成。</p> <h3 id="标准盒模型和怪异盒模型"><a href="#标准盒模型和怪异盒模型" aria-hidden="true" class="header-anchor">#</a> 标准盒模型和怪异盒模型</h3> <p>在 W3C 标准下，我们定义元素的 width 值即为盒模型中的 content 的宽度值，height 值即为盒模型中的 content 的高度值</p> <p>而 IE 怪异盒模型（IE8 以下）width 的宽度并不是 content 的宽度，而是 border-left + padding-left + content 的宽度值 + padding-right + border-right 之和，height 同理。</p> <h3 id="box-sizing"><a href="#box-sizing" aria-hidden="true" class="header-anchor">#</a> box-sizing</h3> <div class="language-css extra-class"><pre class="language-css"><code><span class="token property">box-sizing</span><span class="token punctuation">:</span> content-box // 标准盒模型
<span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box // 怪异盒模型
<span class="token property">box-sizing</span><span class="token punctuation">:</span> padding-box // 火狐的私有模型，没人用
</code></pre></div><h2 id="去除-inline-block-元素间间距的-n-种方法"><a href="#去除-inline-block-元素间间距的-n-种方法" aria-hidden="true" class="header-anchor">#</a> 去除 inline-block 元素间间距的 N 种方法</h2> <blockquote><p>真正意义上的 inline-block 水平呈现的元素间，换行显示或空格分隔的情况下会有间距</p></blockquote> <h3 id="移除空格"><a href="#移除空格" aria-hidden="true" class="header-anchor">#</a> 移除空格</h3> <p>元素间留白间距出现的原因就是标签段之间的空格，因此，去掉 HTML 中的空格，自然间距就木有了。考虑到代码可读性，显然连成一行的写法是不可取的，我们可以：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>space<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>##<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 惆怅<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>##<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 淡定<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>##<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 热血<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="使用-margin-负值"><a href="#使用-margin-负值" aria-hidden="true" class="header-anchor">#</a> 使用 margin 负值</h3> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.space a</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">margin-right</span><span class="token punctuation">:</span> -3px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用-font-size-0"><a href="#使用-font-size-0" aria-hidden="true" class="header-anchor">#</a> 使用 font-size:0</h3> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.space</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.space a</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用-letter-spacing"><a href="#使用-letter-spacing" aria-hidden="true" class="header-anchor">#</a> 使用 letter-spacing</h3> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.space</span> <span class="token punctuation">{</span>
  <span class="token property">letter-spacing</span><span class="token punctuation">:</span> -3px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.space a</span> <span class="token punctuation">{</span>
  <span class="token property">letter-spacing</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用-word-spacing"><a href="#使用-word-spacing" aria-hidden="true" class="header-anchor">#</a> 使用 word-spacing</h3> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.space</span> <span class="token punctuation">{</span>
  <span class="token property">word-spacing</span><span class="token punctuation">:</span> -6px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.space a</span> <span class="token punctuation">{</span>
  <span class="token property">word-spacing</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="元素底部为何有空白"><a href="#元素底部为何有空白" aria-hidden="true" class="header-anchor">#</a> <img>元素底部为何有空白</h2> <p>要理解这个问题，首先要弄明白 CSS 对于 display: inline 元素的 vertical-align 各个值的含义。vertical-align 的默认值是 baseline</p> <p><img src="/assets/img/css_img_baseline.53948107.png" alt="img_bsaeline"></p> <p>可以看到，baseline 和 bottom 之间有一定的距离。实际上，inline 的图片下面那一道空白正是 baseline 和 bottom 之间的这段距离。即使只有图片没有文字，只要是 inline 的图片这段空白都会存在。</p> <p>到这里就比较明显了，要去掉这段空白，最直接的办法是将图片的 vertical-align 设置为其他值。如果在同一行里有文字混排的话，那应该是用 bottom 或是 middle 比较好。</p> <p>另外，top 和 bottom 之间的值即为 line-height。假如把 line-height 设置为 0，那么 baseline 与 bottom 之间的距离也变为 0，那道空白也就不见了。如果没有设置 line-height，line-height 的默认值是基于 font-size 的，视渲染引擎有所不同，但一般是乘以一个系数（比如 1.2）。因此，在没有设置 line-height 的情况下把 font-size 设为 0 也可以达到同样的效果。当然，这样做的后果就是不能图文混排了。</p> <h3 id="参考文献-2"><a href="#参考文献-2" aria-hidden="true" class="header-anchor">#</a> 参考文献</h3> <ul><li><img>元素底部为何有空白？：<a href="https://www.zhihu.com/question/21558138" target="_blank" rel="noopener noreferrer">https://www.zhihu.com/question/21558138<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="可替换元素"><a href="#可替换元素" aria-hidden="true" class="header-anchor">#</a> 可替换元素</h2> <blockquote><p>在 CSS 中，可替换元素（replaced element）的展现效果不是由 CSS 来控制的。这些元素是一种外部对象，它们外观的渲染，是独立于 CSS 的。</p></blockquote> <p>典型的可替换元素有：</p> <ul><li><code>&lt;iframe&gt;</code></li> <li><code>&lt;video&gt;</code></li> <li><code>&lt;embed&gt;</code></li> <li><code>&lt;img&gt;</code> *</li></ul> <p>有些元素仅在特定情况下被作为可替换元素处理，例如：</p> <ul><li><code>&lt;option&gt;</code></li> <li><code>&lt;audio&gt;</code></li> <li><code>&lt;canvas&gt;</code></li> <li><code>&lt;object&gt;</code></li> <li><code>&lt;applet&gt;</code></li></ul> <p>HTML 规范也说了 <code>&lt;input&gt;</code> 元素可替换，因为 &quot;image&quot; 类型的 <code>&lt;input&gt;</code> 元素就像 <code>&lt;img&gt;</code> 一样被替换。但是其他形式的控制元素，包括其他类型的 <code>&lt;input&gt;</code> 元素，被明确地列为非可替换元素（non-replaced elements）。该规范用术语小挂件（Widgets）来描述它们默认的限定平台的渲染行为。</p> <h2 id="画-0-5px-的线"><a href="#画-0-5px-的线" aria-hidden="true" class="header-anchor">#</a> 画 0.5px 的线</h2> <ul><li>采用 transform: scale()的方式，该方法用来定义元素的 2D 缩放转换：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>transform: scale(0.5,0.5);
</code></pre></div><ul><li>采用 meta viewport 的方式</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=0.5, minimum-scale=0.5, maximum-scale=0.5&quot;/&gt;
</code></pre></div><p>这样就能缩放到原来的 0.5 倍，如果是 1px 那么就会变成 0.5px。viewport 只针对于移动端，只在移动端上才能看到效果</p> <h2 id="设置小雨-12px-的字体"><a href="#设置小雨-12px-的字体" aria-hidden="true" class="header-anchor">#</a> 设置小雨 12px 的字体</h2> <p>在谷歌下 css 设置字体大小为 12px 及以下时，显示都是一样大小，都是默认 12px。</p> <h3 id="解决办法"><a href="#解决办法" aria-hidden="true" class="header-anchor">#</a> 解决办法</h3> <ul><li>使用 Webkit 的内核的-webkit-text-size-adjust 的私有 CSS 属性来解决，只要加了-webkit-text-size-adjust:none;字体大小就不受限制了。但是 chrome 更新到 27 版本之后就不可以用了。所以高版本 chrome 谷歌浏览器已经不再支持-webkit-text-size-adjust 样式，所以要使用时候慎用。</li> <li>使用 css3 的 transform 缩放属性-webkit-transform:scale(0.5); 注意-webkit-transform:scale(0.75);收缩的是整个元素的大小，这时候，如果是内联元素，必须要将内联元素转换成块元素，可以使用 display：block/inline-block/...；</li> <li>使用图片：如果是内容固定不变情况下，使用将小于 12px 文字内容切出做图片，这样不影响兼容也不影响美观。</li></ul> <h2 id="如何重置元素的属性值到初始值"><a href="#如何重置元素的属性值到初始值" aria-hidden="true" class="header-anchor">#</a> 如何重置元素的属性值到初始值</h2> <blockquote><p>张鑫旭：<a href="https://www.zhangxinxu.com/wordpress/2020/01/css-initial-unset/" target="_blank" rel="noopener noreferrer">CSS inherit是继承，那initial和unset呢<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>MDN：<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/all" target="_blank" rel="noopener noreferrer">all<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>全局属性值</p> <ul><li>initial 该关键字代表改变该元素或其父元素的所有属性至初始值</li> <li>inherit 该关键字代表改变该元素或其父元素的所有属性的值至他们的父元素属性的值</li> <li>unset 该关键字代表如果该元素的属性的值是可继承的，则改变该元素或该元素的父元素的所有属性的值为他们父元素的属性值，反之则改变为初始值</li> <li>revert 在许多情况下，revert 关键字的工作方式与 unset 完全相同。唯一的区别是，属性的值是由浏览器设置的，或者由用户创建的自定义样式表设置的(设置在浏览器端)</li></ul> <p>全局设置属性 all</p> <p>all 属性被作为 CSS 全局关键词的其中之一. 除却 unicode-bidi 与 direction 之外的所有属性重设至其初始值，或继承值。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2022/2/15 下午3:38:50</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/interviewQuestions/HTML.html" class="prev">
        HTML
      </a></span> <span class="next"><a href="/interviewQuestions/JS.html">
        JS
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a3917c08.js" defer></script><script src="/assets/js/2.143bf0e2.js" defer></script><script src="/assets/js/13.ed7b9bad.js" defer></script>
  </body>
</html>
